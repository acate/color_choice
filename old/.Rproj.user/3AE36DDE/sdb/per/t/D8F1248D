{
    "contents" : "# assignment_color.R\n# begun 2016-09-05 (Labor Day) by adc\n\nlibrary(ggplot2)\nlibrary(colorspace)\n\nallDataManuallyFixed <-\n  read.csv(\n    \"~/Google Drive/teaching/CogPsych_4114_2016/in-class_assignments/assignment_2_color/allDataManuallyFixed.csv\"\n  )\n\ndf <- allDataManuallyFixed\n\nattach(df)\n\n# Make copies of the HSV variables that are normalized to range 0,1\n# Some color coordinates require values in that range, or at least as they are\n# implemented in R\n# Keep the original variables, too.\ndf$h <- HUE/360;\ndf$s <- SAT/100;\ndf$v <- VAL/100;\n\nattach(df)\n\n#---------------------------------------------\n# CONVERT color coordinates from HSV to L*u*v\n#---------------------------------------------\n\n# This is worth doing here because we are going to plot the colors on a 2D page.\n\n# - The benefit of the HSV coordinate system is that the terms Hue, Saturation,\n# and Value have meanings that make sense (?) in spoken English.\n\n# - The benefit of the L*u*v* coordinate system is that the distances between\n# colors in this space coorespond to PERCEPTUAL DISSIMILARITY.  Therefore, this\n# is the better coordinate system to use when PLOTTING the colors in a graph.\n\n\n# Super kludgy code to convert HSV values to L*u*v* coordinates:\n\nx <- HSV(cbind(HUE,s,v))\n\n# There seems to be a weird problem with the colorspace package's HSV object class\n# Other classes from this package (e.g. RGB ) can be converted to the LUV class,\n# but not HSV for some reason.\n#\n# Consider the following error:\n# > as(x,\"LUV\")\n# Error in cbind(L, if (missing(U)) NULL else U, if (missing(V)) NULL else V) :\n#   Ambiguous conversion\n#\n# So adc worked around this by converting HSV to RGB (which works) first.\n\ny <- as(as(x,\"RGB\"),\"LUV\")\n\n# Another problem: can't directly coerce LUV class to data frame:\n# > n <- as.data.frame(y)\n# Error in as.data.frame.default(y) :\n#   cannot coerce class \"structure(\"LUV\", package = \"colorspace\")\" to a data.frame\n#\n# So, first convert to matrix, then to data frame:\n\nm <- coords(y);\nmdf <- as.data.frame(m);\n\n# Calculate means for each category (color name)\nmeanColors <- rbind(tapply(m[,2],colorName,mean),tapply(m[,3],colorName,mean))\n\n#-----------------\n# Draw the plots\n#-----------------\n\n# The second and third dimensions of the LUV color space are the ones related to\n# hue and saturation.  The first is the lightness dimension, so leave that out\n# here\ncp <- ggplot(mdf,aes(mdf[,2],mdf[,3],color=hsv(h,s,v),group=colorName,label=colorName))\n\n# For comparison, make plots where the colors are displayed not as the students\n# chose them, but with a constant saturation or value level\ncpKSat <- ggplot(mdf,aes(mdf[,2],mdf[,3],color=hsv(h,.8,v),group=colorName,label=colorName))\ncpKVal <- ggplot(mdf,aes(mdf[,2],mdf[,3],color=hsv(h,s,.8),group=colorName,label=colorName))\n\n# Also make a version where BOTH saturation and value are constant.  This means\n# that colors only vary by HUE.\ncpKSatVal <- ggplot(mdf,aes(mdf[,2],mdf[,3],color=hsv(h,.8,.8),group=colorName,label=colorName))\n\n\n# Plot the colors as they appeared when students chose them:\n# cp + geom_point(size=8) + scale_color_identity(guide=\"none\") +\n#   coord_fixed() + labs(list(title = \"Colors as chosen\", x = \"u*\", y = \"v*\"))\n\n# Version with 95% confidence ellipses\n# cp + geom_point(size=8) + scale_color_identity(guide=\"none\") +\n#   coord_fixed() + stat_ellipse()\n\n\n# Plot the colors as they appeared when students chose them:\n# With linetype to distinguish ellipses, which also makes a legend\n# (adc couldn't figure out how to make line colors different easily)\ncp + geom_point(size=4) + scale_color_identity() + coord_fixed() +\n  stat_ellipse(aes(linetype=colorName)) +\n  scale_linetype_manual(values=c(2,4,6,1,3,5,7,3,6)) +\n  labs(list(title = \"Colors as chosen by all students\\n95% confidence ellipses\",\n            x = \"u*\", y = \"v*\"))\n\n# Plot the colors as they would appear if they all had the same SATURATION\ncpKSat + geom_point(size=4) + scale_color_identity(guide=\"none\") + coord_fixed() +\n  labs(list(title = \"Colors constrained to have constant SATURATION\", x = \"u*\", y = \"v*\"))\n\n# Plot the colors as they would appear if they all had the same VALUE\ncpKVal + geom_point(size=4) + scale_color_identity(guide=\"none\") + coord_fixed() +\n  labs(list(title = \"Colors constrained to have constant VALUE\", x = \"u*\", y = \"v*\"))\n\n# Plot the colors as they would appear if they varied ONLY by HUE\n# Put the ellipses on them again, because some color category distinctions will\n# no longer be visible!\ncpKSatVal + geom_point(size=4) + scale_color_identity(guide=\"none\") + coord_fixed() +\n  stat_ellipse(aes(linetype=colorName)) +\n  scale_linetype_manual(values=c(2,4,6,1,3,5,7,3,6)) +\n  labs(list(title = \"Colors constrained vary ONLY by HUE\\n95% confidence ellipses\",\n            x = \"u*\", y = \"v*\"))\n\n# Funny all-text versions:\n# (UNCOMMENT these lines to activate the code)\n#----\n# cp + scale_color_identity(guide=\"none\") + coord_fixed() + stat_ellipse() +\n# geom_text(fontface=\"bold\") cp + scale_color_identity(guide=\"none\") +\n# coord_fixed() + stat_ellipse() +\n# geom_label(fill=hsv(h,s,v),color=\"gray\",size=3)\n\n\n\n#----------------------------\n# Histograms of HSV variables\n#----------------------------\n\nhueShift <- HUE;\nhueShift[hueShift > 340] <- hueShift[hueShift > 340] - 360;\n\ndf$hueShift <- hueShift;\n\nattach(df)\n\n# Plot histogram of HUE numbers\nggplot(df[colorName!=\"Indigo\",],aes(hueShift,group=colorName,color=colorName)) +\n  geom_freqpoly(bins=36) + scale_color_identity()\n\n# Plot histogram of SATURATION numbers\nggplot(df[colorName!=\"Indigo\",],aes(SAT,group=colorName,color=colorName)) +\n  geom_freqpoly(bins=10) + scale_color_identity()\n\n# Plot histogram of VALUE numbers\nggplot(df[colorName!=\"Indigo\",],aes(VAL,group=colorName,color=colorName)) +\n  geom_freqpoly(bins=10) + scale_color_identity()\n\n",
    "created" : 1473109813576.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4002639274",
    "id" : "D8F1248D",
    "lastKnownWriteTime" : 1478492961,
    "path" : "~/Google Drive/teaching/CogPsych_4114_2016/in-class_assignments/assignment_2_color/in-class_assignment_2_color_RESULTS.R",
    "project_path" : "in-class_assignment_2_color_RESULTS.R",
    "properties" : {
        "notebook_format" : "pdf_document",
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}